{% block content %}    
    <style>
        {% include './components/toggle-switch/toggle-switch.css' %}
    </style> 

    <script>
        let state = false;
        function switch_state(element) {
            let highlight = document.getElementById("main_slide_btn");
            let width = (document.getElementById("toggle-page-wpr").getBoundingClientRect()['width']/2)+5;
            
            if (state) {
                highlight.style.transform = "translate(0px,-23px)";
                highlight.style.borderRadius = "10px 0px 0px 10px";
                state = false;
                get_page_data('social');
            } else {
                highlight.style.transform = "translate("+width+"px,-23px)";
                highlight.style.borderRadius = "0px 10px 10px 0px";
                state = true;
                get_page_data('knowledge');
            }
        }

        function get_page_data(page) {
            console.log("commit");
            socket.emit('get_page_data',JSON.stringify({sender: user_name, 'page':page})); 
        }

        socket.on("recieve_page_data", (msg, color="black") => {
            var message_json = JSON.parse(msg);
    
            var side_bar = document.getElementById("dynamic_sidebar");
            side_bar.innerHTML = message_json['page_data_sidebar'];

            var main_page = document.getElementById("padding_alt");
            main_page.innerHTML = message_json['page_data_main'];

            if (message_json['page_type'] == 'social') {
                socket.emit('load_chat_configs',JSON.stringify({sender: user_name})); 
            }
        });
    </script>
            
    <div id="toggle-page-wpr" class="toggle-wpr">
        <div onclick="switch_state(this)" class="toggle">
            <div class="switch_division">
                <p>Chatroom</p>
            </div>
            <div class="switch_division">
                <p>Articles</p>
            </div>
        </div>
        <div onclick="switch_state(this)" id="main_slide_btn" class="btn"></div>
    </div> 
{% endblock %}